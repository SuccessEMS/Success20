<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Top_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="print" data-mc-toc-path="Configuration Guides|EMS Mobile App|Deploying the EMS Mobile App">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="mt-type" value="application/x.deki-text" />
        <meta name="mt-unsafe" value="true" /><title>Configuring and Re-Signing the EMS Mobile App (Private Deployment Only)</title>
        <link rel="icon" href="../../Resources/Images/favicon.png" />
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-left" id="offCanvas" data-off-canvas="" data-position="left" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-left is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div>
                        <nav class="title-bar tab-bar" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="relative clearfix"><a class="logo" href="../../Home.htm" alt="Logo"></a>
                                    <div class="navigation-wrapper nocontent">
                                        <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                            <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="nav-search row outer-row">
                                <form class="search" action="#">
                                    <div class="search-bar search-bar-container needs-pie">
                                        <input class="search-field needs-pie" type="search" placeholder="How Can We Help You?" />
                                        <div class="search-filter-wrapper">
                                            <div class="search-filter">
                                                <div class="search-filter-content">
                                                    <ul>
                                                        <li>All Files</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="search-submit-wrapper" dir="ltr">
                                            <div class="search-submit" title="How Can We Help You?">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row" data-mc-content-body="True">
                            <div class="content">
                                <div id="contentBody">
                                    <div class="row collapse">
                                        <div class="topichero">
                                            <div class="title-text">
                                                <form class="search" action="#">
                                                    <div class="search-bar search-bar-container needs-pie _Skins_HomeSearchBar mc-component">
                                                        <input class="search-field needs-pie" type="search" placeholder="What can we help you find?" />
                                                        <div class="search-filter-wrapper">
                                                            <div class="search-filter">
                                                                <div class="search-filter-content">
                                                                    <ul>
                                                                        <li>All Files</li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="search-submit-wrapper" dir="ltr">
                                                            <div class="search-submit" title="How Can We Help You?">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                        <div class="container">
                                            <div class="nocontent">
                                                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                </div>
                                            </div>
                                            <div class="sideContent small-3 columns" id="smartmenu-accordion">
                                                <!--	<MadCap:menuProxy style="mc-toc-depth: -1;mc-context-sensitive: True;mc-include-parent: False;mc-include-siblings: False;mc-include-children: True;" class="menu" data-mc-skin="/Project/Skins/SideMenu.flskn" mc-linked-toc="/Project/TOCs/Master.fltoc" />-->
                                                <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-linked-toc="Data/Tocs/Icon_MobileApp.js" data-mc-side-menu="True" data-mc-max-depth="-1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="False" data-mc-include-siblings="False" data-mc-include-parent="False" data-mc-toc="True">
                                                </ul>
                                            </div>
                                            <div class="small-9 columns right-content">
                                                <h1>Configure and Re-Sign the EMS Mobile App (Private Deployment Only)</h1>
                                                <p>This topic provides information on the following:</p>
                                                <ul>
                                                    <li value="1"><a href="#Use_Unsigned_Builds" class="MCXref xref" xrefformat="{para}">Use Unsigned Builds</a>
                                                    </li>
                                                    <li value="2"><a href="#Set_Custom_Configuration" class="MCXref xref" xrefformat="{para}">Set Custom Configuration</a>
                                                        <ul>
                                                            <li value="1"><a href="#IOScustconfig" class="MCXref xref" xrefformat="{para}">IOS</a>
                                                            </li>
                                                            <li value="2"><a href="#Androidcustconfig" class="MCXref xref" xrefformat="{para}">Android</a>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li value="3"><a href="#Re-Sign_and_Repackage_for_iOS" class="MCXref xref" xrefformat="{para}">Re-Sign and Repackage for iOS</a>
                                                        <ul>
                                                            <li value="1"><a href="#Install_Fastlane_iOS" class="MCXref xref" xrefformat="{para}">1. Install Fastlane</a>
                                                            </li>
                                                            <li value="2"><a href="#install-certificate-provisioning-profile_iOS" class="MCXref xref" xrefformat="{para}">2. Install Certificate and Provisioning Profile</a>
                                                            </li>
                                                            <li value="3"><a href="#resigning_iOS" class="MCXref xref" xrefformat="{para}">3. Re-Sign</a>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                    <li value="4"><a href="#Re-Sign_and_Repackage_for_Android" class="MCXref xref" xrefformat="{para}">Re-Sign and Repackage for Android</a>
                                                    </li>
                                                </ul>
                                                <h2><a name="Use_Unsigned_Builds"></a>Use Unsigned Builds</h2>
                                                <p>For customers re-signing the application, we provide unsigned builds.</p>
                                                <ol>
                                                    <li value="1">Store your unsigned EMS Mobile App&#160;in a new or empty directory.</li>
                                                    <li value="2">Change the extension of the app to .zip.&#160;(e.g., IPhone.App-44.1.xxx-unsigned.ipa -&gt; IPhone.App-44.1.xxx-unsigned.zip.)</li>
                                                    <li value="3">Un-compress/expand the new zip file.</li>
                                                </ol>
                                                <h2><a name="Set_Custom_Configuration"></a>Set Custom Configuration</h2>
                                                <ol>
                                                    <li value="1">Refer to&#160;<a href="Mobile_CustomizeMobileAppUsingConfigJson.htm" class="MCXref xref" xrefformat="{para}">Customize Your Mobile App Configuration Using config.json (Private Deployment Only)</a>&#160;for details on building a configuration file for EMS Mobile.&#160;</li>
                                                    <li value="2">Replace the config.json file with your custom configuration (located as follows):</li>
                                                </ol>
                                                <h3><a name="IOScustconfig"></a>IOS</h3>
                                                <ul>
                                                    <li value="1">
                                                        <p>config.json (top-level file)</p>
                                                    </li>
                                                </ul>
                                                <h3><a name="Androidcustconfig"></a>Android</h3>
                                                <ul>
                                                    <li value="1">
                                                        <p>assets/config.json</p>
                                                    </li>
                                                </ul>
                                                <h2><a name="Re-Sign_and_Repackage_for_iOS"></a>Re-Sign and Repackage for iOS</h2>
                                                <p>Follow the steps below to re-sign and repackage for iOS.</p>
                                                <h3><a name="Install_Fastlane_iOS"></a>1. Install Fastlane</h3>
                                                <p>Using sudo gem, install fastlane on an administrative&#160;Apple computer.</p>
                                                <h3><a name="install-certificate-provisioning-profile_iOS"></a>2. Install Certificate and Provisioning Profile</h3>
                                                <p>If your Apple computer&#160;is already configured with these items, these steps may not be necessary.&#160;</p>
                                                <h4>Provisioning Profile</h4>
                                                <ol>
                                                    <li value="1">Login to <a class="link-https" href="https://developer.apple.com" rel="freeklink" title="https://developer.apple.com">https://developer.apple.com</a></li>
                                                    <li value="2">Download your Distribution provisioning profile</li>
                                                    <li value="3">Double click it to install it. This file should exist on your system:
    <ul><li value="1">~/Library/MobileDevice/Provisioning Profiles/&lt;profile-guid&gt;.mobileprovision</li></ul></li>
                                                </ol>
                                                <h4>Certificate</h4>
                                                <p>See Apple's <a href="https://developer.apple.com/library/content/documentation/IDEs/Conceptual/AppDistributionGuide/MaintainingCertificates/MaintainingCertificates.html" title="https://developer.apple.com/library/content/documentation/IDEs/Conceptual/AppDistributionGuide/MaintainingCertificates/MaintainingCertificates.html">documentation </a>for installing and managing certificates and signing identities.&#160;When the certificate is installed successfully, you should see iPhone Distribution: Your Company, Inc in your Keychain, with a private key.</p>
                                                <h3><a name="resigning_iOS"></a>3. Re-Sign</h3>
                                                <p>Assuming you have:</p>
                                                <ul>
                                                    <li value="1">Fastlane installed on your Apple computer</li>
                                                    <li value="2">the cert and private key installed in Keychain</li>
                                                    <li value="3">the provisioning profile mentioned above in ~/Library/.../&lt;profile-guid&gt;.mobileprovision</li>
                                                </ul>
                                                <p>...then you should be ready to re-sign the application. Before you proceed, change the following in the command below:</p>
                                                <ul>
                                                    <li value="1">Replace path/to/your/file.ipa with the real path to the ipa file</li>
                                                    <li value="2">Replace iPhone Distribution: Your Company, Inc with the appropriate signing identity on your machine</li>
                                                    <li value="3">Replace &lt;profile-guid&gt; with the actual GUID or name of the provisioning profile you intend to use</li>
                                                    <li value="4">Replace <span class="bold">EMS-Resigned</span> with the display name you wish to use, or remove the parameter if you do not wish to rename the application</li>
                                                </ul>
                                                <div class="note-box note">
                                                    <p><span class="bold">Note:</span> Running these commands will <span class="bold">overwrite </span>the ipa file you designate. Make a copy first if necessary.</p>
                                                </div>
                                                <blockquote>
                                                    <p style="text-align: left;">fastlane run resign \<br />&#160;&#160;&#160; ipa:path/to/your/file.ipa \<br />&#160;&#160;&#160; signing_identity:"iPhone Distribution: Your Company, Inc" \<br />&#160;&#160;&#160; provisioning_profile:$HOME/Library/MobileDevice/Provisioning Profiles/&lt;profile-guid&gt;.mobileprovision \<br />&#160;&#160;&#160; display_name:EMS-Resigned</p>
                                                </blockquote>
                                                <p>(All on one line for copy/paste:)</p>
                                                <blockquote>
                                                    <p>fastlane run resign ipa:path/to/your/file.ipa signing_identity:"iPhone Distribution: Your Company, Inc" provisioning_profile:$HOME/Library/MobileDevice/Provisioning Profiles/&lt;profile-guid&gt;.mobileprovision display_name:EMS-Resigned</p>
                                                </blockquote>
                                                <p>If you want a bash script that will do this, you can copy this into a file (e.g., resign_enterprise.sh):</p>
                                                <blockquote>
                                                    <p style="text-align: left;">#!/bin/bash<br /><br />IPA=relative/path/to/file.ipa<br />IDENTITY="iPhone Distribution: Your Company, Inc"<br />PROFILE=$HOME/Library/MobileDevice/Provisioning\ Profiles/&lt;profile-guid&gt;.mobileprovision<br />DISPLAY_NAME=EMS-Resigned<br /><br />fastlane run resign ipa:"$IPA" signing_identity:"$IDENTITY" provisioning_profile:"$PROFILE" display_name:$DISPLAY_NAME</p>
                                                </blockquote>
                                                <h2><a name="Re-Sign_and_Repackage_for_Android"></a>Re-Sign and Repackage for Android</h2>
                                                <ul>
                                                    <li value="1">Re-zip all the extracted files from earlier
    <ul><li value="1">Note that assets, res, and AndroidManifest.xml are top-level files in an .apk, so be careful to zip the right files</li><li value="2">This CLI command will zip all the files in the current directory into a new zip file in the parent directory:
        <ul><li value="1">zip -qr ../ems-custom-44.1.xxx.zip ./*</li></ul></li></ul></li>
                                                    <li value="2">Give the new zip file an .apk extension
    <ul><li value="1">e.g., myapp.zip -&gt; myapp.apk</li></ul></li>
                                                    <li value="3">Sign the new .apk file, for example:</li>
                                                </ul>
                                                <blockquote>
                                                    <p style="text-align: left;"><span class="italics">#!/bin/bash</span>
                                                        <br />
                                                        <br />APK_TO_SIGN=$1<br />APK_OUTPUT=$2<br />EMS_APK_KEYSTORE_PATH=path/to/your/app.keystore<br /><br />jarsigner -verbose \<br />&#160;&#160;&#160; -sigalg $EMS_APK_SIG_ALG \<br />&#160;&#160;&#160; -digestalg $EMS_APK_DIGEST_ALG \<br />&#160;&#160;&#160; -storepass $EMS_APK_KEYSTORE_PASS \<br />&#160;&#160;&#160; -keystore $EMS_APK_KEYSTORE_PATH \<br />&#160;&#160;&#160; $APK_TO_SIGN $EMS_APK_ALIAS_NAME<br /><br />zipalign 4 $APK_TO_SIGN $APK_OUTPUT</p>
                                                </blockquote>
                                                <p>&#160;</p>
                                            </div>
                                            <!-- <MadCap:topicToolbarProxy style="mc-topic-toolbar-items: Back Separator Print Forward;" />-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="footer center">
                                <div class="container">
                                    <div class="HomeMasterPageFooter outer-row">
                                        <div><a href=""><a href="https://www.emssoftware.com/privacy-policy">Privacy Policy </a>|<a href="https://www.emssoftware.com/terms-of-use">Terms of Use </a>|<a href="../../ContactUs.htm"> Contact </a>|<a href="mailto:success@emssoftware.com?subject=Documentation Feedback"> Feedback</a></a>
                                            <p class="Copyright">© <span class="GeneralYear">2018</span> <span class="GeneralMy Company">EMS&#160;Software</span>, LLC. All Rights Reserved.</p>
                                        </div>
                                        <div class="footer-icons"><a href="" class="facebook"></a><a href="" class="twitter"></a><a href="" class="youtube"></a><a href="" class="linkedin"></a><a href="" class="googleplus"></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <script src="../../Resources/Scripts/sidemenu.js">
                            </script>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>