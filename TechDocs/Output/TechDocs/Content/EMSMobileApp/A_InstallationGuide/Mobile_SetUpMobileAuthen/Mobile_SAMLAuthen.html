<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Top_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-has-content-body="True" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="print" data-mc-toc-path="Installation Guides|EMS Mobile App|EMS Mobile Authentication">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="mt-type" value="application/x.deki-text" />
        <meta name="mt-unsafe" value="true" /><title>SAML Authentication</title>
        <link rel="icon" href="../../../Resources/Images/favicon.png" />
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" />
        <link href="../../../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/MainStyles.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/PatternedRows.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-left" id="offCanvas" data-off-canvas="" data-position="left" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-left is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div>
                        <nav class="title-bar tab-bar" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="relative clearfix"><a class="logo" href="../../../Home.htm" alt="Logo"></a>
                                    <div class="navigation-wrapper nocontent">
                                        <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="2" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                            <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="nav-search row outer-row">
                                <form class="search" action="#">
                                    <div class="search-bar search-bar-container needs-pie">
                                        <input class="search-field needs-pie" type="search" placeholder="How Can We Help You?" />
                                        <div class="search-filter-wrapper">
                                            <div class="search-filter">
                                                <div class="search-filter-content">
                                                    <ul>
                                                        <li>All Files</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="search-submit-wrapper" dir="ltr">
                                            <div class="search-submit" title="How Can We Help You?">
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row" data-mc-content-body="True">
                            <div class="content">
                                <div id="contentBody">
                                    <div class="row collapse">
                                        <div class="topichero">
                                            <div class="title-text">
                                                <form class="search" action="#">
                                                    <div class="search-bar search-bar-container needs-pie _Skins_HomeSearchBar mc-component">
                                                        <input class="search-field needs-pie" type="search" placeholder="What can we help you find?" />
                                                        <div class="search-filter-wrapper">
                                                            <div class="search-filter">
                                                                <div class="search-filter-content">
                                                                    <ul>
                                                                        <li>All Files</li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="search-submit-wrapper" dir="ltr">
                                                            <div class="search-submit" title="How Can We Help You?">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                        <div class="container">
                                            <div class="nocontent">
                                                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                </div>
                                            </div>
                                            <div class="sideContent small-3 columns" id="smartmenu-accordion">
                                                <ul class="menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/Master.js" data-mc-side-menu="True" data-mc-max-depth="-1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="False" data-mc-include-parent="False" data-mc-toc="True">
                                                </ul>
                                                <!-- <MadCap:menuProxy style="mc-toc-depth: 2;mc-context-sensitive: True;mc-include-parent: True;mc-include-siblings: False;mc-include-children: True;" data-mc-skin="/Project/Skins/SideMenu.flskn" mc-linked-toc="/Project/TOCs/SidemenuTOC.fltoc" />-->
                                            </div>
                                            <div class="small-9 columns right-content">
                                                <h1>SAML Authentication</h1>
                                                <p>This section guides you authenticating your users with a SAML provider. Authentication with SAML requires getting configuration information into <span class="GeneralMobile">EMS&#160;Mobile App</span>&#160;prior to beginning the authentication flow.</p>
                                                <p>To use SAML&#160;authentication, you will:</p>
                                                <ol class="mt-indent-1">
                                                    <li value="1"><a href="#Configure_SAML_Authentication_for_Mobile_App" class="MCXref xref">Configure SAML Authentication for EMS&#160;Mobile App</a>
                                                    </li>
                                                    <li value="2"><a href="#Test_Your_SAML_Configuration" class="MCXref xref">Test Your SAML&#160;Configuration</a>
                                                    </li>
                                                    <li value="3"><a href="#Test_Your_SAML_Authentication" class="MCXref xref">Test Your SAML&#160;Authentication</a>
                                                    </li>
                                                </ol>
                                                <p class="note-box">Note:&#160;For more information about how SAML&#160;Authentication can be hosted or pre-configured in the EMS Mobile App, see <a href="Mobile_SAMLAuthenHostPreconfig.htm">SAML Authentication&#160;Can Be&#160;Hosted or Pre-Configured in the EMS Mobile App</a>.&#160;</p>
                                                <h2><a name="Configure_SAML_Authentication_for_Mobile_App"></a>Configure SAML Authentication for EMS&#160;Mobile App</h2>
                                                <p>Setting up SAML involves configuration on both the Identify Provider and Service Provider sides.</p>
                                                <h3>Identify Your&#160;Provider in Configuration</h3>
                                                <p>You are responsible for the configuration of your chosen IdP, with information relevant to the EMS Platform Services acting as a Service Provider for SAML Authentication. The following EMS Platform Services related settings may be needed in order to configure your IdP.</p>
                                                <ul>
                                                    <li value="1"><span class="bold">EMS Platform Signing Certificate:</span>&#160;Optional certificate used by EMS Platform to sign AuthnRequests sent to IdP.</li>
                                                    <li value="2"><span class="bold">SP Issuer:</span>&#160;Optional service provider identifier used to identify the EMS Platform to the identify provider. (e.g. http://mycompany.com/EmsPlatform)</li>
                                                    <li value="3"><span class="bold">Service Provider Post back URL:</span> Optional URL for Identify Provider to use for generating SAMLResponse POST Back URL to EMS Platform as the Service Provider. This should be set to the URL to the EMS Platform Services SAML Auth Endpoint (e.g., https://mycompany.com/EmsPlatform/api/v1/authentication/saml). If the Service Provider post back URL is not configured with the IdP, then it will need to be configured from the EMS Platform Admin UI.</li>
                                                    <li value="4">Following fields are required to complete SAML authentication configuration:&#160;</li>
                                                </ul>
                                                <table border="1" cellpadding="0" cellspacing="0" style="mc-table-style: url('../../../Resources/TableStyles/PatternedRows.css');" class="TableStyle-PatternedRows">
                                                    <col class="TableStyle-PatternedRows-Column-Regular" />
                                                    <col class="TableStyle-PatternedRows-Column-Regular" />
                                                    <thead>
                                                        <tr class="TableStyle-PatternedRows-Head-Header1">
                                                            <th class="TableStyle-PatternedRows-HeadE-Regular-Header1">
                                                                <p>Field</p>
                                                            </th>
                                                            <th class="TableStyle-PatternedRows-HeadD-Regular-Header1">
                                                                <p>Description</p>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                <p><span class="bold">Form Post Field Name</span>
                                                                </p>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                <p>HTTP Form Post Attribute (optional, default is SamlResponse). Attribute in which assertions are sent, within encoded &lt;samlp:Response&gt; document.</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                <p><span class="bold">User Info Request Method </span>
                                                                </p>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                <p>Dropdown with choice of assertion element containing user identity (NameID&#160;or Attribute). If set to Attribute, then must set <span class="bold">Identity Attribute Name</span> to expected assertion attribute name to use for user identity.</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                <p><span class="bold">Identity Attribute Name</span> <![CDATA[ ]]></p>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                <p>Assertion attribute name containing user identity. Attribute names can be identity provider specific (i.e. 'uid', 'mail').</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                <p><span class="bold">Identity Provider Issuer </span>
                                                                </p>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                <p>Optional Identity Provider Issuer (i.e. urn:emsplayground.auth0.com) to use to verify expected issuer of assertions, included in SAMLResponse as &lt;saml:Issuer&gt;.</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                <p><span class="bold">Service Provider Issuer </span>
                                                                </p>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                <p>Optional Service Provider issuer identifier, to be included by EMS Platform in AuthnRequest requests sent to Identify Provider. This maps to the &lt;saml:Issuer&gt; element in the SAML AuthnRequest. Ex: http://mycompany.com/EmsPlatform</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                <p><span class="bold">Identity Provider URL for Service Provider Redirect </span>
                                                                </p>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                <p>Required Identity Provider Redirect URL (ex. https://idp.example.org/SAML2/SSO/Redirect). This URL includes two SAML-defined query string argument (typically 'SAMLRequest' and 'RelayState'). 'SAMLRequest' includes the authentication request details, provided by EMS Platform. 'RelayState' contains opaque data that EMS Platform includes in the request, in order for the Identify Provider to include as Relay State on the SAML Response. If 'SAMLRequest' and 'RelayState' are not included in the configured URL, the EMS Platform will add them automatically to the request sent to the Identify Provider. For example, if you configure a URL of https://idp.example.org/SAML2/SSO/Redirect, the resulting URL that EMS Platform calls will look like https://idp.example.org/SAML2/SSO/Redirect?SAMLRequest=[SamlRequest data]&amp;RelayState=[Opaque EMS Data].</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                <p><span class="bold">Service Provider Callback URL</span> <![CDATA[ ]]></p>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                <p>Base URL of EMS Platform, used for the Identity Provider callback URL in the SAML HTTP POST binding. Set this URL to the base URL of the EMS Platform installation (i.e. https://mycompany.com/EmsPlatform).</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-DarkerRows">
                                                                <p><span class="bold">Path to Identity Provider Public Certificate</span> <![CDATA[ ]]></p>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-DarkerRows">
                                                                <p>Optional identity provider public key (.pem) for EMS Platform to use to verify SAML Assertions.</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-LightRows">
                                                            <td class="TableStyle-PatternedRows-BodyE-Regular-LightRows">
                                                                <p><span class="bold">Path to Service Provider Public Certificate </span>
                                                                </p>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyD-Regular-LightRows">
                                                                <p>Optional Customer-generated public cert (.cer/.pem) file containing base64 encoded public cert for EMS Platform to use to sign AuthnRequests sent to identity provider.</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-PatternedRows-Body-DarkerRows">
                                                            <td class="TableStyle-PatternedRows-BodyB-Regular-DarkerRows">
                                                                <p><span class="bold">Path to Service Provider Private Certificate</span> <![CDATA[ ]]></p>
                                                            </td>
                                                            <td class="TableStyle-PatternedRows-BodyA-Regular-DarkerRows">
                                                                <p>Optional Customer-generated private cert (.cer/.pem) file containing base64 encoded public cert for EMS Platform to use to sign AuthnRequests sent to identity provider.</p>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                <h3>How EMS Platform Services Supports SAML</h3>
                                                <p>No 2fa support is provided&#160;with SAML authentication. 2fa is the responsibility of the Identity Provider (3rd-Party or Customer owned) and not the EMS Platform Services.&#160;Token expiration is configured and managed the same for SAML as for other authorization types, thus overriding any SAML Assertion Conditions that specify the assertion expiration timestamp.</p>
                                                <p class="note-box">See Also: <a href="Mobile_PersistentAuthen.htm" class="MCXref xref">Persistent Authentication</a> for token expiration configuration details. See Also:&#160;Refer to <a href="../../B_ConfigurationGuide/Mobile_CustomizeMobileAppUsingConfigJson.htm" class="MCXref xref">Customize Your Mobile App Configuration Using config.json (Private Deployment Only)</a>&#160;for details on building a configuration file for <span class="GeneralMobile">EMS&#160;Mobile App</span>.</p>
                                                <p>Once you have created your configuration file, you may proceed with one of the sections below, depending on whether you intend to host the file or pre-configure the application and redistribute it.</p>
                                                <h3>Use Hosted Configuration (Public Deployment)</h3>
                                                <p>Host your configuration file from an applicable web server. Distribute the URL to your end users.</p>
                                                <p class="note-box">Warning: It is not recommended to make this configuration file publicly available, since it will likely have URLs and/or other information in it that you do not want made available. Instead, host the file in a way such that it is only available internally to your organization. Users should only have to perform this import one time per installation of the application.</p>
                                                <h3>Pre-Configure EMS&#160;Mobile App (Private Deployment)</h3>
                                                <p>If you wish to pre-configure <span class="GeneralMobile">EMS&#160;Mobile App</span>, see&#160;<a href="../../B_ConfigurationGuide/Mobile_ConfigRe-signMobilePrivDeploy.html" class="MCXref xref">Configure and Re-Sign the EMS Mobile App (Private Deployment Only)</a>.</p>
                                                <h2><a name="Test_Your_SAML_Configuration"></a>Test Your SAML&#160;Configuration</h2>
                                                <p>Assuming you have installed the EMS Platform Services API at https://ems.yourcompany.com/endpoint, then you can test the configuration with a simple curl command:</p>
                                                <div class="indent">cURL -X GET -H 'x-ems-consumer: MobileApp' https://ems.yourcompany.com/endpoint/api/v1/health</div>
                                                <p class="note-box">Tip: You can also use the API's Swagger interface to accomplish this goal.</p>
                                                <p>You should see a portion of the JSON response that looks like this (unrelated details omitted for brevity):</p>
                                                <blockquote>
                                                    <p>{<br />&#160;&#160;&#160; ...<br />&#160;&#160;&#160; "additionalProperties": {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; "authConfig": {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; "activities":"saml"&#160; // &lt;-- these are the critical lines<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; "ui":"saml"<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }<br />&#160;&#160;&#160; }<br />}</p>
                                                </blockquote>
                                                <h2><a name="Test_Your_SAML_Authentication"></a>Test Your SAML&#160;Authentication</h2>
                                                <p>The SAML process should be testable in a browser, assuming all configuration is correct.&#160;</p>
                                                <ol>
                                                    <li value="1">Visit the EMS Platform Services API SAML URL in a browser. </li>
                                                    <li value="2">After logging in a logging in as a user, you should see a JSON response in the browser containing the EMS Platform Services API's authentication response.</li>
                                                </ol>
                                            </div>
                                            <!-- <MadCap:topicToolbarProxy style="mc-topic-toolbar-items: Back Separator Print Forward;" />-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="footer center">
                                <div class="container">
                                    <div class="HomeMasterPageFooter outer-row">
                                        <div><a href=""><a href="https://www.emssoftware.com/privacy-policy">Privacy Policy </a>|<a href="https://www.emssoftware.com/terms-of-use">Terms of Use </a>|<a href="../../../ContactUs.htm"> Contact </a>|<a href="mailto:success@emssoftware.com?subject=Documentation Feedback"> Feedback</a></a>
                                            <p class="Copyright">Â© <span class="GeneralYear">2018</span> <span class="GeneralMy Company">EMS&#160;Software</span>, LLC. All Rights Reserved.</p>
                                        </div>
                                        <div class="footer-icons"><a href="" class="facebook"></a><a href="" class="twitter"></a><a href="" class="youtube"></a><a href="" class="linkedin"></a><a href="" class="googleplus"></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <script src="../../../Resources/Scripts/sidemenu.js">
                            </script>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>